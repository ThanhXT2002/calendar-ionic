<!-- extended-day-info.component.html -->
<div class="extended-day-info">
  <!-- Can Chi và thông tin cơ bản -->

  <div class="px-2 py-3">
    <div
      class="relative bg-gradient-to-r from-indigo-900 via-purple-900 to-black text-white rounded-xl py-5 px-3 text-center mb-5 shadow-lg overflow-hidden"
    >
      <!-- Icon Âm Dương xoay -->
      <i
        class="fa-solid fa-yin-yang mr-2 text-2xl mb-2 text-yellow-400 z-10 relative animate-spin-slow"
      ></i>

      <!-- Nội dung Can Chi -->
      <h2 class="text-lg z-10 relative">
        Ngày <strong class="text-yellow-300">{{ dayCanChi }}</strong> Tháng
        <strong class="text-yellow-300">{{ monthCanChi }}</strong> Năm
        <strong class="text-yellow-300">{{ yearCanChi }}</strong>
      </h2>

      <!-- Các hiệu ứng linh hoạt -->
      <i
        class="fa-solid fa-star absolute top-1 left-3 text-yellow-300 text-sm animate-twinkle"
      ></i>
      <div
        class="absolute top-4 right-4 w-2 h-2 bg-yellow-200 rounded-full animate-fade-pulse"
      ></div>
      <i
        class="fa-solid fa-star absolute bottom-2 left-6 text-yellow-400 text-xs animate-twinkle"
      ></i>
      <div
        class="absolute bottom-3 right-5 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-fade-pulse"
      ></div>
      <i
        class="fa-solid fa-moon absolute top-2 left-1/2 text-yellow-100 text-[10px] animate-fade-pulse"
      ></i>
    </div>

    <div
      class="py-4 px-2 lg:p-6 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-950 rounded-xl shadow-2xl border border-yellow-500/20 relative overflow-hidden"
    >
      <!-- Starry background effect -->
      <div class="absolute inset-0 opacity-30">
        <div
          class="absolute top-4 left-8 w-1 h-1 bg-yellow-300 rounded-full animate-ping"
        ></div>
        <div
          class="absolute top-12 right-12 w-1.5 h-1.5 bg-yellow-200 rounded-full animate-pulse"
        ></div>
        <div
          class="absolute bottom-16 left-16 w-0.5 h-0.5 bg-yellow-100 rounded-full animate-ping"
        ></div>
        <div
          class="absolute bottom-8 right-8 w-1 h-1 bg-yellow-400 rounded-full animate-pulse"
        ></div>
        <div
          class="absolute top-20 left-1/3 w-0.5 h-0.5 bg-yellow-200 rounded-full animate-ping"
        ></div>
        <div
          class="absolute bottom-24 right-1/4 w-1 h-1 bg-yellow-300 rounded-full animate-pulse"
        ></div>
      </div>

      <div class="text-center mb-8 relative z-10">
        <!-- Moon icon with glow -->
        <div
          class="inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-yellow-400 via-yellow-500 to-amber-500 rounded-full mb-4 shadow-2xl relative"
        >
          <div
            class="absolute inset-0 bg-yellow-400/30 rounded-full animate-pulse scale-110"
          ></div>
          <i class="fa-solid fa-moon text-slate-900 text-3xl relative z-10"></i>
        </div>

        <h3
          class="text-3xl font-bold text-transparent bg-gradient-to-r from-yellow-300 via-yellow-400 to-amber-300 bg-clip-text mb-2"
        >
          Giờ Hoàng Đạo
        </h3>
      </div>

      <div class="grid grid-cols-3 md:grid-cols-6 gap-3 md:gap-5 relative z-10">
        @for (hour of goodHours; track hour.gioChi) { @if (hour.isGoodHour) {
        <div
          class="group relative bg-gradient-to-br from-slate-800/60 to-blue-900/40 backdrop-blur-sm rounded-2xl p-5 pb-4 shadow-xl border border-yellow-500/20 hover:border-yellow-400/40 transition-all duration-500 hover:-translate-y-2 hover:shadow-2xl hover:shadow-yellow-500/10"
        >
          <!-- Constellation effect -->
          <div
            class="absolute top-3 right-3 w-2 h-2 bg-yellow-400 rounded-full animate-pulse opacity-60"
          ></div>
          <div
            class="absolute top-5 right-6 w-1 h-1 bg-yellow-300 rounded-full animate-ping opacity-40"
          ></div>

          <!-- Glow border effect -->
          <div
            class="absolute inset-0 bg-gradient-to-r from-yellow-500/0 via-yellow-500/10 to-yellow-500/0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"
          ></div>

          <div class="flex items-center justify-center flex-col relative z-10">
            <!-- Hình ảnh con vật trong moon circle -->
            <div
              class="w-18 h-18 bg-gradient-to-br from-yellow-400/20 to-amber-500/20 rounded-full p-2 shadow-lg border-2 border-yellow-500 relative"
            >
              <div
                class="absolute inset-0 bg-yellow-400/10 rounded-full animate-pulse"
              ></div>
              <img
                [src]="hour.chiImage"
                [alt]="hour.gioChi"
                class="w-14 h-full object-contain group-hover:scale-110 transition-transform duration-500 filter brightness-110 relative z-10 rounded-full"
              />
            </div>

            <h4
              class="text-xl font-bold text-yellow-300 group-hover:text-yellow-200 transition-colors duration-300 text-center mt-1"
            >
              {{ hour.gioChi }}
            </h4>

            <p class="text-sm font-semibold text-yellow-100/90">
              {{ hour.khungGio }}h
            </p>
          </div>

          <!-- Bottom accent line -->
          <div
            class="absolute bottom-0 left-0 right-0 h-0.5 bg-gradient-to-r from-transparent via-yellow-400/50 to-transparent"
          ></div>
        </div>
        } }
      </div>

      <!-- Mystical footer -->
      <div class="mt-8 text-center relative z-10">
        <div
          class="inline-flex items-center space-x-2 text-yellow-200/60 text-xs"
        >
          <i class="fa-solid fa-moon text-yellow-400 animate-pulse"></i>
          <span class="font-medium">Được tính toán theo âm lịch cổ truyền</span>
          <i class="fa-solid fa-star text-yellow-400 animate-pulse"></i>
        </div>
      </div>
    </div>

      <!-- Chất lượng ngày -->
      @if (dateGoodBadInfo) {
        <div class="mt-5 relative bg-gradient-to-br from-slate-900 via-purple-900 to-black rounded-2xl shadow-2xl border border-amber-500/30 overflow-hidden">

          <!-- Mystical background with floating particles -->
          <div class="absolute inset-0 overflow-hidden">
            <!-- Animated stars -->
            <div class="absolute top-8 left-12 w-1 h-1 bg-amber-300 rounded-full animate-ping"></div>
            <div class="absolute top-16 right-20 w-1.5 h-1.5 bg-yellow-200 rounded-full animate-pulse delay-300"></div>
            <div class="absolute bottom-20 left-8 w-0.5 h-0.5 bg-amber-400 rounded-full animate-ping delay-700"></div>
            <div class="absolute bottom-12 right-16 w-1 h-1 bg-yellow-300 rounded-full animate-pulse delay-1000"></div>
            <div class="absolute top-32 left-1/3 w-0.5 h-0.5 bg-amber-200 rounded-full animate-ping delay-500"></div>
            <div class="absolute bottom-32 right-1/4 w-1 h-1 bg-yellow-400 rounded-full animate-pulse delay-200"></div>

            <!-- Mystical glow effects -->
            <div class="absolute top-0 left-1/4 w-32 h-32 bg-purple-500/10 rounded-full blur-3xl animate-pulse"></div>
            <div class="absolute bottom-0 right-1/4 w-40 h-40 bg-amber-500/10 rounded-full blur-3xl animate-pulse delay-1000"></div>

            <!-- Floating runes/symbols -->
            <div class="absolute top-6 right-6 text-amber-400/20 text-2xl animate-bounce">☯</div>
            <div class="absolute bottom-6 left-6 text-purple-400/20 text-lg animate-bounce delay-500">✦</div>
            <div class="absolute top-1/2 left-4 text-yellow-400/20 text-xl animate-bounce delay-1000">⚡</div>
          </div>

          <div class="relative z-10 p-4 lg:p-8">

            <!-- Mystical Header with God Image -->
            <div class="text-center mb-8">

              <!-- Floating mystical circle with god image -->
              <div class="relative inline-block mt-2 md:mt-0 mb-5">
                <!-- Outer rotating ring -->
                <div class="absolute inset-0 w-32 h-32 border-2 border-dashed rounded-full animate-spin-slow scale-125 lg:scale-110"
                     [ngClass]="isAuspicious ? 'border-amber-400/50' : 'border-red-400/50'"></div>

                <!-- Inner pulsing ring -->
                <div class="absolute inset-2 w-28 h-28 border border-solid rounded-full animate-pulse "
                     [ngClass]="isAuspicious ? 'border-amber-300/70' : 'border-red-300/70'"></div>

                <!-- God image container with mystical glow -->
                <div class="relative w-32 h-32 rounded-full overflow-hidden shadow-2xl border-4 border-amber-500/80 bg-gradient-to-br from-amber-100 to-yellow-200">
                  <!-- Mystical glow behind image -->
                  <div class="absolute inset-0 rounded-full animate-pulse"
                       [ngClass]="isAuspicious ? 'bg-amber-400/30' : 'bg-red-400/30'"></div>

                  <img
                    [src]="godImage"
                    [alt]="godName"
                    class="w-full h-full object-cover relative z-10 transition-transform duration-700 hover:scale-110"
                    (error)="onGodImageError($event)"
                  />

                  <!-- Inner light effect -->
                  <div class="absolute inset-0 bg-gradient-to-t from-transparent via-transparent to-white/20 rounded-full"></div>
                </div>

                <!-- Floating magical particles around image -->
                <div class="absolute -top-2 -left-2 w-2 h-2 bg-amber-400 rounded-full animate-ping"></div>
                <div class="absolute -top-1 -right-3 w-1.5 h-1.5 bg-yellow-300 rounded-full animate-pulse delay-300"></div>
                <div class="absolute -bottom-2 -left-3 w-1 h-1 bg-amber-300 rounded-full animate-ping delay-700"></div>
                <div class="absolute -bottom-1 -right-2 w-1.5 h-1.5 bg-yellow-400 rounded-full animate-pulse delay-500"></div>
              </div>

              <!-- God name with mystical styling -->
              <div class="mb-4">
                <h3 class="text-4xl font-bold text-transparent bg-gradient-to-r from-amber-300 via-yellow-400 to-amber-300 bg-clip-text mb-3 tracking-wide">
                  {{ godName }}
                </h3>

                <!-- Day type badge with mystical frame -->
                <div class="relative inline-block">
                  <!-- Decorative corners -->
                  <div class="absolute -top-2 -left-2 w-4 h-4 border-t-2 border-l-2 rounded-tl-lg"
                       [ngClass]="isAuspicious ? 'border-amber-400' : 'border-red-400'"></div>
                  <div class="absolute -top-2 -right-2 w-4 h-4 border-t-2 border-r-2 rounded-tr-lg"
                       [ngClass]="isAuspicious ? 'border-amber-400' : 'border-red-400'"></div>
                  <div class="absolute -bottom-2 -left-2 w-4 h-4 border-b-2 border-l-2 rounded-bl-lg"
                       [ngClass]="isAuspicious ? 'border-amber-400' : 'border-red-400'"></div>
                  <div class="absolute -bottom-2 -right-2 w-4 h-4 border-b-2 border-r-2 rounded-br-lg"
                       [ngClass]="isAuspicious ? 'border-amber-400' : 'border-red-400'"></div>

                  <div class="px-6 py-3 bg-gradient-to-r border-2 rounded-lg backdrop-blur-sm font-bold text-lg tracking-wide transition-all duration-500 hover:scale-105"
                       [ngClass]="isAuspicious ?
                         'from-green-400/80 to-emerald-400/30 border-amber-400/60 text-amber-200' :
                         'from-red-900/80 to-rose-900/80 border-red-400/60 text-red-200'">

                    <i [ngClass]="getDayTypeIcon()" class="text-xl mr-3"></i>
                    <span class="text-shadow-lg">{{ dayTypeText }}</span>
                  </div>
                </div>
              </div>

              <!-- Mystical description with floating text effect -->
              <div class="bg-black/30 backdrop-blur-sm rounded-xl p-4 border border-amber-500/20">
                <p class="text-amber-100 text-sm leading-relaxed italic font-light tracking-wide">
                  <i class="fa-solid fa-quote-left text-amber-400/60 mr-2"></i>
                  {{ getGodDescription() }}
                  <i class="fa-solid fa-quote-right text-amber-400/60 ml-2"></i>
                </p>
              </div>
            </div>

            <!-- Mystical Activities Sections -->
            <div class="grid lg:grid-cols-2 gap-8">

              <!-- Favorable Activities - Blessing Section -->
              @if (getFavorableActivities().length > 0) {
                <div class="relative group">
                  <!-- Mystical container -->
                  <div class="bg-gradient-to-br from-emerald-900/40 via-green-900/30 to-teal-900/40 backdrop-blur-sm rounded-2xl p-6 border border-emerald-400/30 shadow-2xl transition-all duration-500 hover:border-emerald-300/50 hover:shadow-emerald-500/20">

                    <!-- Floating blessing symbols -->
                    <div class="absolute top-2 right-2 text-emerald-300/40 text-lg animate-pulse">✓</div>
                    <div class="absolute top-4 right-6 text-green-300/30 text-sm animate-bounce delay-300">✦</div>

                    <!-- Header with mystical icon -->
                    <div class="flex items-center mb-6">
                      <div class="w-8 h-8 bg-gradient-to-br from-emerald-400 to-green-500 rounded-full flex items-center justify-center shadow-lg mr-4">
                        <i class="fa-solid fa-check-circle text-white text-xl"></i>
                      </div>
                      <h4 class="text-xl font-bold text-emerald-200 tracking-wide">
                        Việc Nên Làm
                      </h4>
                    </div>

                    <!-- Activities with floating card effect -->
                    <div class="space-y-3">
                      @for (activity of getFavorableActivities(); track activity) {
                        <div class="group/item relative bg-emerald-950/50 backdrop-blur-sm rounded-lg p-3 border border-emerald-500/20 transition-all duration-300 hover:border-emerald-400/40 hover:bg-emerald-900/30 hover:-translate-y-1">
                          <!-- Glow effect on hover -->
                          <div class="absolute inset-0 bg-emerald-400/5 rounded-lg opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"></div>

                          <div class="relative flex items-center">
                            <div class="w-2 h-2 bg-emerald-400 rounded-full mr-3 animate-pulse"></div>
                            <span class="text-emerald-100 font-medium tracking-wide group-hover/item:text-emerald-50 transition-colors">
                              {{ activity }}
                            </span>
                          </div>
                        </div>
                      }
                    </div>

                    <!-- Mystical blessing aura -->
                    <div class="absolute inset-0 bg-gradient-to-r from-emerald-500/0 via-emerald-500/5 to-emerald-500/0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                  </div>
                </div>
              }

              <!-- Unfavorable Activities - Warning Section -->
              @if (getUnfavorableActivities().length > 0) {
                <div class="relative group">
                  <!-- Mystical container -->
                  <div class="bg-gradient-to-br from-red-900/40 via-rose-900/30 to-pink-900/40 backdrop-blur-sm rounded-2xl p-6 border border-red-400/30 shadow-2xl transition-all duration-500 hover:border-red-300/50 hover:shadow-red-500/20">

                    <!-- Floating warning symbols -->
                    <div class="absolute top-2 right-2 text-red-300/40 text-lg animate-pulse">⚠</div>
                    <div class="absolute top-4 right-6 text-rose-300/30 text-sm animate-bounce delay-300">✧</div>

                    <!-- Header with mystical icon -->
                    <div class="flex items-center mb-6">
                      <div class="w-8 h-8 bg-gradient-to-br from-red-400 to-rose-500 rounded-full flex items-center justify-center shadow-lg mr-4">
                        <i class="fa-solid fa-times-circle text-white text-xl"></i>
                      </div>
                      <h4 class="text-xl font-bold text-red-200 tracking-wide">
                        Việc Không Nên Làm
                      </h4>
                    </div>

                    <!-- Activities with floating card effect -->
                    <div class="space-y-3">
                      @for (activity of getUnfavorableActivities(); track activity) {
                        <div class="group/item relative bg-red-950/50 backdrop-blur-sm rounded-lg p-3 border border-red-500/20 transition-all duration-300 hover:border-red-400/40 hover:bg-red-900/30 hover:-translate-y-1">
                          <!-- Glow effect on hover -->
                          <div class="absolute inset-0 bg-red-400/5 rounded-lg opacity-0 group-hover/item:opacity-100 transition-opacity duration-300"></div>

                          <div class="relative flex items-center">
                            <div class="w-2 h-2 bg-red-400 rounded-full mr-3 animate-pulse"></div>
                            <span class="text-red-100 font-medium tracking-wide group-hover/item:text-red-50 transition-colors">
                              {{ activity }}
                            </span>
                          </div>
                        </div>
                      }
                    </div>

                    <!-- Mystical warning aura -->
                    <div class="absolute inset-0 bg-gradient-to-r from-red-500/0 via-red-500/5 to-red-500/0 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-500"></div>
                  </div>
                </div>
              }
            </div>

            <!-- Mystical Footer with Ancient Wisdom -->
            <div class="mt-8 text-center">
              <div class="relative inline-block bg-black/40 backdrop-blur-sm rounded-full px-8 py-3 border border-amber-500/30">
                <!-- Decorative symbols -->
                <div class="absolute -left-2 top-1/2 transform -translate-y-1/2 text-amber-400 text-lg animate-spin-slow">☯</div>
                <div class="absolute -right-2 top-1/2 transform -translate-y-1/2 text-amber-400 text-lg animate-spin-slow">☯</div>

                <div class="flex items-center space-x-3 text-amber-200/80 text-sm">
                  <i class="fa-solid fa-dragon text-amber-400 animate-pulse"></i>
                  <span class="font-medium tracking-wider">Thần Hoàng Đạo Cổ Truyền</span>
                  <i class="fa-solid fa-yin-yang text-amber-400 animate-pulse"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      }

      <!-- Mystical Error Message -->
      @if (errorMessage) {
        <div class="mt-4 relative bg-gradient-to-r from-red-900/80 to-rose-900/80 backdrop-blur-sm rounded-xl p-4 border border-red-400/40 shadow-xl">
          <!-- Floating warning particles -->
          <div class="absolute top-2 right-2 w-1 h-1 bg-red-300 rounded-full animate-ping"></div>
          <div class="absolute bottom-2 left-2 w-1.5 h-1.5 bg-rose-300 rounded-full animate-pulse delay-300"></div>

          <div class="relative flex items-center text-red-200">
            <div class="w-8 h-8 bg-red-500/80 rounded-full flex items-center justify-center mr-3">
              <i class="fa-solid fa-exclamation-triangle text-white"></i>
            </div>
            <span class="font-medium tracking-wide">{{ errorMessage }}</span>
          </div>
        </div>
      }
  </div>


</div>
